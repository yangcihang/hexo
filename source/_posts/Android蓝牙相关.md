---
title: Android蓝牙相关
date: 2017-10-21 23:16:18
tags: Android
categories: Android
---

## 蓝牙4.0、传统蓝牙、低能耗蓝牙
* 蓝牙4.0标准包含两个蓝牙标准，准确的说，是一个双模的标准，它包含传统蓝牙部分（也有称之为经典蓝牙Classic Bluetooth）和低功耗蓝牙部分（Bluetooth Low Energy）。这两个部分适用于不同的应用或者应用条件。   传统蓝牙可以用与数据量比较大的传输，如语音，音乐，较高数据量传输等，像咱们以前偶尔用手机的蓝牙传输，低功耗蓝牙这样应用于实时性要求比较高，但是数据速率比较低的产品，如遥控类的，如鼠标，键盘。（来自百度）不过BLE在Android 4.3才开始支持BLE API<!--more-->

* 传统蓝牙 就是手机上用的那种，它有两个角色一个是客户端一个是服务器（前提是android手机系统版本小于4.3之前的）手机它既可以做客户端也可以做服务器端。所以手机既可以作为客户端去搜索服务器端（其他手机），也可以作为服务器端被其他其他客户端（手机端）搜索到。
当客户端搜索到蓝牙服务器后并与之配对后，才能通过UUID（这个是唯一的，服务器端必须与客户端一致）建立socket，然后使用流像文件读写和网络通信那样传输数据就行了。

* 低功能耗蓝牙也就是BLE, 它的角色变成了一个是中心设备（central）一个是外围设备（peripheral），中心设备就是你的手机，外围设备就是智能手环一类的东西。大于等于4.3 和 小于5.0 之间的android手机系统版本，只能作为中心设备去搜索一些其他外围设备，不能做为外围设备被其他中心设备搜索到；在 5.0以及5.0 之后，既可以作为中心设备，也可以作为外围设备。

## 通信方式
传统的蓝牙一般通过socket的方式，而低功耗蓝牙是通过Gatt协议来实现的。单从Android的文档的使用来看，两者没有很大的关联。
## 权限
在安卓6.0以后，蓝牙若只有BLUETOOTH_ADMIN和BLUETOOTH权限是不够的，还得需要ACCESS_FINE_LOCATION和ACCESS_COARSE_LOCATION地理位置权限，如果没有这俩权限并不会报错，而是会搜索不到附近的蓝牙信息。这两个位置权限需要用户主动授权，也就是说得动态授权。
